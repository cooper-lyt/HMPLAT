<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:s="http://jboss.org/schema/seam/taglib"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:a="http://richfaces.org/a4j"
                xmlns:r="http://richfaces.org/rich"
                xmlns:dh="http://www.dgsoft.com/jsf/html"
                template="/layout/template-data.xhtml">



    <ui:param name="funcName" value="#{messages.EmployeeMgr}"/>



    <ui:decorate template="/layout/edit-modalpanel.xhtml">
    <ui:param name="panelId" value="editPanel"/>
    <ui:param name="panelTitle" value="#{messages.create}#{' '}#{messages.Developer}"/>


        <div class="form-inline">
            <s:decorate id="idField" styleClass="form-group " template="/layout/edit-big.xhtml">
                <ui:define name="label">
                    #{messages.employee_field_id}
                </ui:define>
                <ui:param name="for" value="idInput"/>
                <ui:param name="status" value="idStatus"/>
                <h:inputText id="idInput" required="true" styleClass="form-control" maxlength="32"
                             label="#{messages.employee_field_id}" size="32"
                             value="#{employeeHome.instance.id}" disabled="#{employeeHome.managed}"
                             valueChangeListener="#{employeeHome.verifyIdAvailable}">
                    <f:validateRequired/>
                    <a:ajax event="change" render="idField" status="idStatus"/>
                </h:inputText>

            </s:decorate>


            <div class="form-big-switch form-group">
                <dh:switch value="#{employeeHome.instance.enable}"
                           rendered="#{employeeHome.managed}"
                           onText="#{messages.Enable}"
                           offText="#{messages.Disable}"
                           styleClass="js-switch "/>


            </div>

        </div>

        <s:decorate id="nameField" styleClass="form-group" template="/layout/edit-big.xhtml">
            <ui:define name="label">
                #{messages.person_field_name}
            </ui:define>
            <ui:param name="for" value="nameInput"/>
            <h:inputText id="nameInput" required="true" styleClass="form-control" maxlength="50"
                         label="#{messages.person_field_name}"
                         value="#{employeeHome.instance.personName}">


            </h:inputText>
        </s:decorate>

        <s:decorate id="phoneField" styleClass="form-group" template="/layout/edit-big.xhtml">
            <ui:define name="label">
                #{messages.person_field_phone}
            </ui:define>
            <ui:param name="for" value="phoneInput"/>
            <h:inputText id="phoneInput" styleClass="form-control" maxlength="20"
                         label="#{messages.person_field_phone}"
                         value="#{employeeHome.instance.phone}">
            </h:inputText>
        </s:decorate>

        <s:decorate id="emailField" styleClass="form-group" template="/layout/edit-big.xhtml">
            <ui:define name="label">
                #{messages.employee_field_email}
            </ui:define>
            <ui:param name="for" value="emailInput"/>
            <h:inputText id="emailInput" styleClass="form-control" maxlength="50"
                         label="#{messages.employee_field_email}"
                         value="#{employeeHome.instance.EMail}">


            </h:inputText>
        </s:decorate>



    </ui:decorate>



<s:decorate template="/layout/edit-modalpanel.xhtml">
    <ui:param name="panelId" value="powerEditPanel"/>
    <ui:param name="panelTitle" value="#{messages.employee_power_title}"/>

    <ui:define name="controls">
        <a:commandButton immediate="true"
                         execute="@this" image="/img/icons/close.png"
                         oncomplete="#{r:component('powerEditPanel')}.hide(); return false;">
            <s:conversationPropagation type="end"/>
            <s:conversationId/>
            <a:attachQueue requestDelay="0"/>
        </a:commandButton>
    </ui:define>

    <r:panel>
        <f:facet name="header">
            #{messages.emp_power_role_select}
        </f:facet>

        <r:pickList value="#{employeeHome.selectedRoles}" listHeight="200px"
                       addText="#{messages.pick_add}"
                       removeAllText="#{messages.pick_removeAll}"
                       addAllText="#{messages.pick_addAll}" removeText="#{messages.pick_remove}">

            <s:selectItems value="#{roleList.resultList}" var="_role"
                           label="#{_role.name}"/>
            <f:converter converterId="systemEntityConverter"/>
        </r:pickList>
    </r:panel>
    <ui:define name="actionButtons">
        <a:commandButton value="#{messages.update}" action="#{employeeHome.savePowerAssign}"
                         execute="@form" data="#{employeeHome.lastState}" render="powerEditPanel_inputs"
                         oncomplete="if (event.data == 'updated'){#{r:component('powerEditPanel')}.hide();}">
            <a:attachQueue requestDelay="0"/>
        </a:commandButton>

        <a:commandButton immediate="true" execute="@this"
                         value="#{messages.cancel}"
                         oncomplete="#{r:component('powerEditPanel')}.hide();">
            <s:conversationPropagation type="end"/>
            <a:attachQueue requestDelay="0"/>
        </a:commandButton>
    </ui:define>
</s:decorate>





    <h:outputStylesheet>
        .columns_tree {
            vertical-align: top;
            width: 30%;
        }

        .columns_employee {
            vertical-align: top;
            text-align: center;
            width: 70%;
        }
    </h:outputStylesheet>



        <h:form>

            <s:div styleClass="blankslate" rendered="#{empty employeeList.resultList}">
                <span class="mega-octicon octicon-search"></span>

                <h3>#{messages.EmptyResult}</h3>

                <p>  #{messages.YouCan}#{' '}
                    <a:commandLink value="#{messages.create}"
                                   oncomplete="$('#districtEditPanel').modal({backdrop: 'static'})"
                                   render="districtEditPanel_form">
                        <a:attachQueue requestDelay="0"/>
                        <a:param value="" assignTo="#{districtHome.id}"/>
                    </a:commandLink>


                    #{' '} #{messages.Or}  #{messages.Try} #{' '}
                    <s:link value="#{messages.AvancedSearch}"/></p>
            </s:div>

            <h:dataTable style="width:100%" id="employeeListPanel" value="#{employeeList.resultList}"
                            var="_emp" render="#{not empty employeeList.resultList}">
                <h:column>
                    <f:facet name="header">
                        #{messages.employee_field_id}
                    </f:facet>

                    <h:outputText value="#{_emp.id}" styleClass="#{_emp.enable ? '' : ''}"/>
                </h:column>
                <h:column>
                    <f:facet name="header">
                        #{messages.person_field_name}
                    </f:facet>

                    <h:outputText value="#{_emp.personName}" styleClass="#{_emp.enable ? '' : ''}"/>
                </h:column>

                <h:column >
                    <f:facet name="header">
                        #{messages.person_field_phone}
                    </f:facet>
                    <h:outputText value="#{_emp.phone}" styleClass="#{_emp.enable ? '' : ''}"/>
                </h:column>

                <h:column >
                    <f:facet name="header">
                        #{messages.eMail}
                    </f:facet>
                    <h:outputText value="#{_emp.personName}" styleClass="#{_emp.enable ? '' : ''}"/>
                </h:column>
                <r:column style="width: 50px">
                    <f:facet name="header">
                        #{messages.action}
                    </f:facet>

                    <a:commandButton immediate="true" image="/img/icons/edit.png" title="#{messages.edit}" execute="@this"
                                     render="credentialsForm,viewCredntials,empEditPanel_title,employeeEditPanelHideBtn"
                                     oncomplete="#{r:component('empEditPanel')}.show();">

                        <a:param name="empId" value="#{_emp.id}" assignTo="#{employeeHome.id}"/>

                        <a:attachQueue requestDelay="0"/>
                    </a:commandButton>
                    #{' '}
                    <a:commandButton immediate="true" image="/img/icons/power.png" title="#{messages.employee_power_title}"
                                     execute="@this"
                                     render="powerEditPanel_form,powerEditPanel_controls"
                                     action="#{employeeHome.readPower}"
                                     oncomplete="#{r:component('powerEditPanel')}.show();">
                        <a:param value="#{_emp.id}" assignTo="#{employeeHome.id}"/>

                        <a:attachQueue requestDelay="0"/>
                    </a:commandButton>

                </r:column>
            </h:dataTable>

        </h:form>




</ui:composition>