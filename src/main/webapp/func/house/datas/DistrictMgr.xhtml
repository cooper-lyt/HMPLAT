<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:s="http://jboss.org/schema/seam/taglib"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:a="http://richfaces.org/a4j" xmlns:r="http://richfaces.org/rich"
                xmlns:f="http://java.sun.com/jsf/core"
                template="/layout/simpleDataCURD.xhtml">

    <ui:param name="dataHome" value="#{districtHome}"/>
    <ui:param name="detailsRender" value="idField"/>

    <ui:define name="navigation">
        <r:dataTable value="#{allDistrict.resultList}" var="_dataItem"
                     noDataLabel="#{messages.emptyResult}" style="width: 200px">
            <ui:insert name="listColumns">

                <r:column>
                    <f:facet name="header">
                        <h:outputText value="#{messages.District}"/>
                    </f:facet>
                    <a:commandLink value="#{_dataItem.name}" immediate="true"
                                   execute="@this" image="/img/edit.png"
                                   render="idField,details">
                        <a:param value="#{_dataItem.id}" assignTo="#{districtHome.id}"/>
                        <s:conversationPropagation type="end"/>
                    </a:commandLink>

                </r:column>
            </ui:insert>
        </r:dataTable>

    </ui:define>

    <ui:define name="editFields">

        <s:decorate id="idField" template="/layout/edit.xhtml">
            <ui:define name="label">
                #{messages.District_id}
            </ui:define>
            <h:inputText id="idInput" value="#{districtHome.instance.id}"
                         label="#{messages.District_id}"
                         readonly="#{(not districtHome.editing) or (districtHome.managed)}"
                         required="true" maxlength="9" size="9"
                         valueChangeListener="#{districtHome.verifyIdAvailable}">
                <f:validateRegex pattern="\d+" />
                <a:ajax event="blur" render="idMessages" execute="@this"
                        disabled="#{(not districtHome.editing) or (districtHome.managed)}"/>
            </h:inputText>

            <ui:define name="tail">
                <r:message ajaxRendered="false" id="idMessages" for="idInput"/>
            </ui:define>
        </s:decorate>

        <s:decorate id="nameField" template="/layout/edit.xhtml">
            <ui:define name="label">
                #{messages.District_name}
            </ui:define>
            <h:inputText id="nameInput" value="#{districtHome.instance.name}"
                         label="#{messages.District_name}"
                         readonly="#{not districtHome.editing}"
                         required="true" maxlength="100" size="30"
                         valueChangeListener="#{districtHome.verifyUniqueAvailable}"
                         unique="name">
                <a:ajax event="blur" execute="@this" disabled="#{not districtHome.editing}" render="nameMessages"/>
            </h:inputText>

            <ui:define name="tail">
                <r:message ajaxRendered="false" for="nameInput" id="nameMessages"/>
            </ui:define>

        </s:decorate>

        <s:decorate id="shortNameField" template="/layout/edit.xhtml">
            <ui:define name="label">
                #{messages.District_shortName}
            </ui:define>
            <h:inputText id="shortNameInput" value="#{districtHome.instance.shortName}"
                         label="#{messages.District_shortName}"
                         readonly="#{not districtHome.editing}"
                         required="true" maxlength="10" size="10">
                <r:validator event="blur" disabled="#{not districtHome.editing}"/>
            </h:inputText>

            <ui:define name="tail">
                <r:message ajaxRendered="false" id="shortNameMessages" for="shortNameInput"/>
            </ui:define>
        </s:decorate>

    </ui:define>

</ui:composition>