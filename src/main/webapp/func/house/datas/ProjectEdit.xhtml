<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:r="http://richfaces.org"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:s="http://jboss.org/schema/seam/taglib"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                template="/layout/full-template.xhtml">

    <ui:param name="functionTitle" value="#{sectionHome.instance.name} - #{messages.Project}"/>

    <ui:define name="toolbar">
        <r:toolbar >
            <r:toolbarGroup location="right">
                <s:button styleClass="toolBarBtn" action="cancel" value="#{messages.cancel}"/>
            </r:toolbarGroup>

            <r:toolbarGroup location="right">
                <s:button action="complete" styleClass="toolBarBtn" value="#{messages.complete}"/>
            </r:toolbarGroup>
        </r:toolbar>
    </ui:define>

    <ui:define name="body">



        <ui:include src="/layout/house/DeveloperSelectPanel.xhtml">
            <ui:param name="render" value="developerSelect"/>
        </ui:include>

        <r:panel>
            <h:form id="projectDetails">

                <ui:include src="/layout/house/ProjectInfoEdit.xhtml"/>

                <div style="clear:both">
                    <hr style="border:1px dashed #{richSkin.panelBorderColor}" width="95%" size="1"/>
                </div>
                <h:panelGrid columns="1" style="width: 100%; text-align: center">
                    <s:div styleClass="actionButtons">

                        <r:commandButton immediate="true" value="#{messages.reset}"
                                         action="#{projectHome.refresh}"
                                         execute="@this" render="projectDetails">
                            <r:attachQueue requestDelay="0"/>
                        </r:commandButton>
                        <r:commandButton value="#{messages.add}" execute="@form"
                                         action="#{sectionHome.addNewProject}"
                                         render="projectDetails,projects">
                            <r:attachQueue requestDelay="0"/>

                        </r:commandButton>

                    </s:div>

                </h:panelGrid>
            </h:form>
        </r:panel>

        <br/>
        <h:form>

            <r:dataTable value="#{projects}" var="_project" id="projects"
                         noDataLabel="#{messages.SectionNoProject}" style="width:100%">
                <r:column>
                    <f:facet name="header">
                        #{messages.Project_name}
                    </f:facet>
                    #{_project.name}
                </r:column>


                <r:column>
                    <f:facet name="header">
                        #{messages.Developer}
                    </f:facet>
                    #{_project.developer.name}
                </r:column>

                <r:column>
                    <f:facet name="header">
                        #{messages.Project_buildSize}
                    </f:facet>
                    #{dictionary.getWordValue(_project.buildSize)}
                </r:column>

                <r:column>
                    <f:facet name="header">
                        #{messages.Project_buildCount}
                    </f:facet>
                    #{_project.buildCount}
                </r:column>

                <r:column>
                    <f:facet name="header">
                        #{messages.Project_area}
                    </f:facet>
                    <h:outputText value="#{_project.area}">
                        <f:convertNumber pattern="#0.###"/>
                    </h:outputText>

                </r:column>

                <r:column>
                    <f:facet name="header">
                        #{messages.Project_sumArea}
                    </f:facet>
                    <h:outputText value="#{_project.sumArea}">
                        <f:convertNumber pattern="#0.###"/>
                    </h:outputText>
                </r:column>


                <r:column>
                    <f:facet name="header">
                        #{messages.Project_state}
                    </f:facet>
                    <h:outputText value="#{messages[_project.state.name()]}"/>
                </r:column>

                <r:column rendered="#{not sectionHome.managed}" style="text-align:center;">
                    <f:facet name="header">
                    </f:facet>

                    <r:commandButton image="/img/icons/delete.png" immediate="true" rendered="#{empty _project.id}"
                                     render="projects"
                                     title="#{messages.delete}" execute="@this" action="#{sectionHome.removeNewProject}">
                        <r:attachQueue requestDelay="0"/>
                    </r:commandButton>
                </r:column>

            </r:dataTable>

        </h:form>
    </ui:define>

</ui:composition>