<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:a="http://richfaces.org/a4j" xmlns:r="http://richfaces.org/rich"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:s="http://jboss.org/schema/seam/taglib"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:dh="http://www.dgsoft.com/jsf/html"
                xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
                template="/layout/template-view.xhtml">


    <ui:define name="function-tile">
        <div>

            <ui:include src="/layout/function-nav.xhtml">
                <ui:param name="functions" value="#{authInfo.dataFunctions}"/>
            </ui:include>
            <h1>
                <s:link view="/func/house/owner/PersonalContractLogOnList.xhtml" value="个人网签备案开户"/>
                <span class="path-divider">/</span>
                <strong>
                    <h:outputText value="#{personalContractHome.houseBusiness.afterBusinessHouse.mainOwner.personName}"/>
                </strong>
            </h1>
        </div>

    </ui:define>

    <h:outputStylesheet>
        .out-time {
            color: #8a6d3b;
        }

        .mega-octicon.emp-enable {
            color: #4078c0 !important;
        }
    </h:outputStylesheet>




    <dh:entryGrid styleClass="detailsTable table table-bordered " keyWidth="150">
        <dh:entryGridBlock columns="4">
            <h:outputText value="业务编号"/>
            <h:outputText value="#{personalContractHome.houseBusiness.ownerBusiness.id}"/>
            <h:outputText value="房屋编号"/>
            <h:outputText value="#{personalContractHome.houseBusiness.houseCode}"/>
            <h:outputText value="申请人姓名"/>
            <h:outputText value="#{personalContractHome.houseBusiness.afterBusinessHouse.mainOwner.personName}"/>
            <h:outputText value="证件号"/>
            <h:outputText value="#{personalContractHome.houseBusiness.afterBusinessHouse.mainOwner.credentialsNumber}"/>
            <h:outputText value="权证号"/>
            <h:outputText value="#{personalContractHome.houseBusiness.ownerBusiness.card.number}"/>
            <h:outputText value="联系电话"/>
            <h:outputText value="#{personalContractHome.houseBusiness.afterBusinessHouse.mainOwner.phone}"/>
        </dh:entryGridBlock>
    </dh:entryGrid>

    <ui:decorate template="/layout/delete_confirm_dialog.xhtml">
        <ui:param name="panelId" value="keyDeleteConfirmPanel"/>
        <ui:param name="entityTitle" value="#{messages.AttachCorpLogonKey}"/>
        <ui:define name="deleteNote">
            <p>#{messages.deleteKeyNote}</p>
        </ui:define>
        <a:commandButton styleClass="button button-block danger" action="#{personalContractHome.deleteKey}"
                         value="#{messages.confirmDelete}" oncomplete="$('#keyDeleteConfirmPanel').modal('hide')"
                         render="attachEmpDatas" immediate="true" execute="@this">
            <a:attachQueue requestDelay="0"/>
        </a:commandButton>
    </ui:decorate>

    <h:form id="attachEmpDatas">
        <a:outputPanel>
            <div class="sort-bar" style="margin-bottom: 0;">
                <h3>请插入电子钥匙</h3>
            </div>
        </a:outputPanel>

        <div class="sub-list-item">
            <div class="item-body">
                <span class="mega-octicon octicon-person emp-enable"/>

                <div class="item-title">
                            <span style="float: left;"> <strong class=""> #{personalContractHome.houseBusiness.houseCode}  #{personalContractHome.houseBusiness.afterBusinessHouse.mainOwner.personName}</strong> </span>
                            <span class="table-actions" style="float: right;">


                            <s:link styleClass="table-action" title="#{messages.AttachEmpAddKey}"
                                    view="/func/house/owner/PersonalKeyBinding.xhtml">
                                <span class="octicon octicon-plus"/>
                                #{messages.AttachEmpAddKey}
                                <f:param name="pid" value="#{personalContractHome.instance.id}"/>

                                <a:attachQueue requestDelay="0"/>
                            </s:link>

                            </span>
                </div>


                <div class="details" style="clear: both;">
                    <div class="commits pusher-is-only-committer">
                        <ul>
                            <a:repeat value="#{personalContractHome.personalContractLogOnList}" var="_key">
                            <li>

                                <span class="type-icon octicon octicon-key" style="color: #60b044;"/>
                                <a:outputPanel>
                                    #{_key.id}
                                </a:outputPanel>
                                <a:commandLink style="color:#a94442 " execute="@this" immediate="true"
                                               render="keyDeleteConfirmPanel_form"
                                               oncomplete="$('#keyDeleteConfirmPanel').modal('show')">
                                    <a:attachQueue requestDelay="0"/>
                                    <span class="octicon octicon-trashcan"/>
                                    <f:param name="businessId" value="#{_key.businessID}"/>
                                    <f:param name="keyId" value="#{_key.id}"/>
                                </a:commandLink>

                            </li>
                            </a:repeat>

                        </ul>
                    </div>
                </div>
            </div>
        </div>


    </h:form>






</ui:composition>