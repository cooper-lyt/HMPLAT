<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:s="http://jboss.org/schema/seam/taglib"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:r="http://richfaces.org/rich"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:a="http://richfaces.org/a4j"
                template="/layout/template.xhtml">

    <ui:define name="func-body">

    <h:outputStylesheet>
        .wellcome-user{
            margin-bottom: 20px;

            font-size: 20px;
            color: #444;
            cursor: pointer;
            text-decoration: none;
            outline: 0;
        }

        .alert.push{
            margin-bottom: 0;
        }

        .alert.push .title{

            border: 0;
            font-size: inherit;

        }

        blockquote{
            border-left: 0;
        }

    </h:outputStylesheet>





        <a:outputPanel layout="block" styleClass="container" rendered="#{identity.loggedIn}">

            <h:outputStylesheet name="biz.css"/>
            <div class="columns">
                <div class="news column two-thirds">
                    <div class="wellcome-user">
                        <span class="mega-octicon octicon-organization">

                        </span>
                        #{messages.Wellcome}: #{authInfo.loginEmployee.personName}
                    </div>

                    <div class="dashboard-notice" style="padding-left: 15px;padding-bottom: 0">


                        <r:chart title="#{messages.cur_emp_oper_chart_y_label}" styleClass="graf">
                            <a:repeat value="#{employeeTaskTotal.curEmpChartData}" var="_type" >
                                <r:chartSeries label="#{messages[_type.key.name()]}" type="line">
                                    <a:repeat value="#{_type.value}" var="_count">
                                        <r:chartPoint x="#{_count.timeBlock}" y="#{_count.count}" />
                                    </a:repeat>
                                </r:chartSeries>
                            </a:repeat>
                            <r:chartXAxis  label=""/>
                            <r:chartYAxis label=""/>
                        </r:chart>




                    </div>

                     <a:outputPanel id="operList">
                    <a:repeat value="#{employeeBusinessOperList.resultList}" var="_item">
                        <div class="alert push"><div class="body"><!-- push -->
                            <span class="mega-octicon #{_item.operType.manager ? _item.operType : 'octicon-git-commit'} task-oper"></span>

                            <div class="time">
                               <h:outputText value="#{_item.operTime}">
                                   <s:convertDateTime pattern="#{messages.displayDateTimePattern}"/>
                               </h:outputText>
                            </div>

                            <div class="title">
                               <s:link view="/func/house/owner/BusinessView.xhtml" >
                                   <f:param value="#{_item.ownerBusiness.id}" name="businessId"/>
                               #{_item.ownerBusiness.id}
                               </s:link> <strong> #{_item.ownerBusiness.defineName} </strong>
                            </div>

                            <div class="details">

                                <div class="commits pusher-is-only-committer">
                                    <ul>
                                        <li>
          <span title="#{messages[_item.operType]}" class="type-icon octicon #{_item.operType.manager ? _item.operType : 'octicon-git-commit'} task-oper"
                aria-label="#{messages[_item.operType]}">

          </span>
                                           <h:outputText style="font-size: 12px;font-weight: bold" value="#{_item.operType.manager ? messages[_item.operType.name()] : ((_item.operType eq 'CREATE') ? runParam.getStringParamValue('CreateBizTaskName') : _item.taskName)}" ></h:outputText>


                                            <div class="message">
                                                <blockquote>
                                                    #{_item.operType.manager ? _item.comments : _item.taskDescription}
                                                </blockquote>
                                            </div>
                                        </li>
<a:outputPanel rendered="#{_item.operType.otherOper}">
                                        <li>
          <span title="#{messages[_item.operType]}" class="type-icon octicon #{_item.operType} task-oper"
                aria-label="#{messages[_item.operType]}">

          </span>
                                            <h:outputText style="font-size: 12px;font-weight: bold" value="#{messages[_item.operType.name()]}" ></h:outputText>


                                            <div class="message">
                                                <blockquote>
                                                    #{_item.comments}
                                                </blockquote>
                                            </div>
                                        </li>
</a:outputPanel>

                                      </ul>
                                </div>
                            </div>
                        </div></div>
                    </a:repeat>
                     </a:outputPanel>
                    <h:form id="moreAction">
                        <a:outputPanel layout="block" class="pagination ajax_paginate">
                            <a:commandLink class="js-events-pagination" execute="@this" immediate="true"
                                           render="moreAction,operList"
                                           rendered="#{employeeBusinessOperList.nextExists}">
                                #{messages.More}
                                <a:attachQueue requestDelay="0"/>
                                <a:param value="#{employeeBusinessOperList.maxResults + 30}" assignTo="#{employeeBusinessOperList.maxResults}"/>
                            </a:commandLink>
                        </a:outputPanel>
                    </h:form>
                </div>

                <div class="dashboard-sidebar column one-third">
                    <a:outputPanel layout="block" class="octofication" rendered="#{not (allTaskAdapterCacheList.allSize eq 0)}">
                        <div class="message">
                            <div class="broadcast-icon">
                                <span class="mega-octicon octicon-radio-tower"></span>
                                <span class="broadcast-icon-mask left"></span>
                                <span class="broadcast-icon-mask right"></span>
                            </div>
                            <h3>#{messages.you_total_have_task} #{allTaskAdapterCacheList.allSize} #{messages.you_have_task}</h3>
                            <p>#{messages.have_pool_task} #{allTaskAdapterCacheList.ownerSize},#{messages.have_owner_task} #{allTaskAdapterCacheList.pooledSize}</p>
                        </div>
                    </a:outputPanel>

                    <div class="boxed-group flush repos user-repos">
                        <h3>
                            #{messages.AllFunction}
                            <span class="counter"></span>
                        </h3>
                        <div class="boxed-group-inner">
                            <div class="filter-repos filter-bar" role="search">
                                <h:inputText styleClass="filter-input">

                                </h:inputText>
                                <ul class="repo-filterer">
                                    <li>
                                        <s:link value="1" styleClass="repo-filter js-repo-filter-tab filter-selected"/>
                                    </li>
                                    <li>
                                        <s:link styleClass="repo-filter js-repo-filter-tab" value="2"/>
                                    </li>
                                    <li>
                                        <s:link styleClass="repo-filter js-repo-filter-tab" value="3"/>
                                    </li>
                                </ul>
                            </div>
                            <ul class="mini-repo-list">
                                <li class="public source">
                                    <s:link styleClass="mini-repo-list-item css-truncate" value="func"/>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

            </div>

        </a:outputPanel>

        <a:outputPanel layout="block" style="padding: 10px" rendered="#{not identity.loggedIn}">


            <r:chart id="bar" >
                <r:chartLegend sorting="ascending"/>
                <a:repeat value="#{ownerBusinessTotal.resultData}" var="_data">
                    <r:chartSeries label="#{_data.key.name}" type="bar">
                        <a:repeat value="#{_data.value}" var="_item">
                            <r:chartPoint x="#{_item.businessDefine.name}" y="#{_item.count}"/>
                        </a:repeat>
                    </r:chartSeries>
                </a:repeat>
            </r:chart>

        </a:outputPanel>





    </ui:define>


</ui:composition>
