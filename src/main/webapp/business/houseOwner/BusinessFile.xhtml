<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:s="http://jboss.org/schema/seam/taglib"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
                xmlns:a="http://richfaces.org/a4j" xmlns:r="http://richfaces.org/rich" >

    <h:outputStylesheet library="bootstrap-treeview" name="bootstrap-treeview.min.css"/>


    <div class="row">

        <div class="col-md-5">
    <a:outputPanel id="fileTree">
    <div id="tree"></div>

    <h:outputScript>



        $(document).ready(
                function(){
                    $('#tree').treeview({data: #{businessFileEntity.tree},showCheckbox: false});


                    $('#tree').on('nodeSelected', function(event, data) {
                        alert(data.id)
                    });
                });




    </h:outputScript>


    </a:outputPanel>

    <h:form>
        <div style="margin-bottom: 15px">


            <div class="input-group">
                <h:inputText id="newOtherFileInput" styleClass="form-control typeahead" autocomplete="off"

                             value="#{businessFileEntity.otherFileName}" required="true"/>
                            <span class="input-group-btn">
                                <a:commandLink styleClass="btn  btn-default"
                                               oncomplete="#{r:jQuery('newOtherFileInput')}.val('');"
                                               execute="@form" render="fileTree,passBtn" action="#{businessFileEntity.addOtherFile}">
                                    添加附件
                                    <a:attachQueue requestDelay="0"/>
                                </a:commandLink>
                            </span>
            </div>

        </div>
        <h:outputScript>

            $(document).ready(
            function(){



            // 此操作 耗时 如果是查询耗时 加入业务 和 时间 过滤
            $('.typeahead').typeahead({source:#{allOtherFileAutoComplete},minLength:0});

            });



        </h:outputScript>
    </h:form>

        </div>
        <div class="col-md-7">


            <div class="gh-header">
                <div class="gh-header-show">
                    <div class="gh-header-actions">
                        <a href="/cooper-lyt/HMPLAT/wiki/Home/_edit" class="btn btn-sm ">Edit</a>
                        <a href="/cooper-lyt/HMPLAT/wiki/_new" class="btn btn-sm btn-primary">New Page</a>
                    </div>
                    <h1 class="gh-header-title instapaper_title">Home</h1>
                    <div class="gh-header-meta">

                    </div>
                </div>
            </div>

        </div>

    </div>
    <h:outputScript library="bootstrap-treeview" name="bootstrap-treeview.min.js"/>
    <h:outputScript library="bootstrap" name="/js/bootstrap3-typeahead.min.js"/>

    <h:outputScript library="weed-fs" name="weedfs.js"/>
</ui:composition>