<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:s="http://jboss.org/schema/seam/taglib"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:a="http://richfaces.org/a4j" xmlns:r="http://richfaces.org/rich"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
                template="/layout/template.xhtml">

    <ui:define name="headRight">
        <div class="site-search">
        <h:form>


            <h:inputText id="houseDisplayInput" styleClass="chromeless-input"
                         p:placeholder="Search" style="margin-left: 10px"
                         value="#{houseStepSelect.houseDisplayCode}" autocomplete="off">
                <r:placeholder value="#{messages.HouseDisplayCode}"/>
            </h:inputText>


        </h:form>
        </div>

    </ui:define>

    <ui:define name="func-body">
        <h:outputStylesheet>
            .fullBody{
                height: 100%;
                max-height: 100%;
                overflow: hidden;
                border: 0;
                margin: 0;
                padding: 0;
                display: block;
            }

            ::-webkit-scrollbar {
                width: 8px;
                height: 14px;
            }

            ::-webkit-scrollbar-thumb {
                border-width: 0;
                border-style: solid;
                border-radius: 6px;
                background: #d9d9d9;
            }

            ::-webkit-scrollbar-button {
                display: none;
            }

            ::-webkit-scrollbar-track, ::-webkit-scrollbar-track-piece {
                background: -webkit-gradient(linear, left top, right top, from(#f6f6f6), color-stop(50%, #fff), color-stop(75%, #fff), to(#fdfdfd));
                width: 11px;
                height: 11px;
            }

            ::-webkit-scrollbar-track, ::-webkit-scrollbar-track-piece {
                background: -webkit-gradient(linear, left top, right top, from(#f6f6f6), color-stop(50%, #fff), color-stop(75%, #fff), to(#fdfdfd));
                width: 11px;
                height: 11px;
            }


            .default-main {
                position: absolute;
                top: 114px;
                bottom: 0px;
                width: 100%;
                overflow: hidden;
                margin: 0;
                padding: 0;
                display: block;
            }

            .main-wrapper{
                height: 100%;
                margin: 0;
                padding: 0;
                display: block;
            }

            .column1 {
                background: url("#{facesContext.externalContext.requestContextPath}/img/fullRightBlackround.png") repeat-y 0 0;
        width: 171px;
        border-right: 1px solid #c1c1c1;
        left: 0;
        }

        .column3 {

            min-width: 100px;
            max-width: 500px;
            right: 0px;
            background: url("#{facesContext.externalContext.requestContextPath}/img/rightSplit.png") repeat-y;
        width: 250px;
        border-left: 1px solid #c1c1c1;

        }

        .mb-layout-bd {
            position: absolute;
            height: 100%;
            margin: 0;
            padding: 0;
            display: block;
        }

        .leftbar-outer {
            overflow-y: overlay;
            overflow-x: visible;
            position: absolute;
            bottom: 0px;
            width: 100%;
            top: 0px;
            margin: 0;
            padding: 0;
            display: block;
        }

        .leftbar-control {
            width: 171px;
            font-size: 12px;
            color: #333333;
            padding: 0;
            bottom: 0px;
            position: absolute;
            border-top: 1px solid #eaeaeb;
            margin: 0;
            display: block;
        }

        .leftbar {
            margin-top:0px;
            padding: 0;
            display: block;
            overflow-x: visible;
        }

        .album-wrapper {
            position: absolute;
            z-index: 1;
            width: 100%;
            background: #fff;
            margin-left: 3px;
            text-align: center;

        }

        .album-wrapper .album {
            text-align: center;
            margin: 20px 0 11px;
            color: #333;
            padding-right: 6px;
            margin: 0;
            padding: 0;
            display: block;
        }

        .column3 .split {
            margin-bottom: 15px;
        }

        .control-top{
            background-image: url("#{facesContext.externalContext.requestContextPath}/img/titleBar.png");
        background-repeat: repeat-x;
        }

        .ui-resizable {
            height: 100%;
            position: absolute;
            left: 0;
            top: 0;
            width: 5px;
            cursor: w-resize;
            z-index: 10;
            margin: 0;
            padding: 0;
            display: block;
        }


        .resizable-icon {
            height: 38px;
            width: 9px;
            background: url("#{facesContext.externalContext.requestContextPath}/img/tools.png") -195px -461px no-repeat;
        top: 50%;
        margin: -19px 0 0 0;
        left: -1px;
        position: absolute;
        z-index: 10;
        padding: 0;
        }

        .column2 {
            left: 172px;
            right: 250px;
        }


        .sectionName-input {
            width:123px !important;

        }


        .colum1-sub-input{
            margin: 4px 0 4px 0;
            width: 100%;
        }

        .list-all {
            margin: 5px 0px;
            padding-top: 10px;
            padding-left: 7px;
            height: auto;
            border-top: 1px solid #f2f3f6;
            line-height: 25px;
            position: relative;
        }

        .list-title {
            padding-left: 8px;
            color: #999;
            font-weight: bold;
        }


        .ui-watermark-container {
            position: relative;
            overflow: hidden;
            display: inline-block;
            _display: inline;
            _zoom: 1;
            width: 140px;
        }


        .colum1-banner{
            overflow-y: visible;
            background-image: url("#{facesContext.externalContext.requestContextPath}/img/titleBar.png");
        background-repeat: repeat-x;
        margin: 0;
        padding: 0;
        display: block;
        height: 45px;
        background-position: 0 0;

        width: 100%;
        }

        .searchBar{
            position: absolute;
            top:10px;
            margin: 0 10px 4px 10px;
            z-index: 99;
            width: 149px;
            height: 25px;
            line-height: 24px;
            white-space: nowrap;
            background: url("#{facesContext.externalContext.requestContextPath}/img/tools.png") no-repeat;
        background-position: 0px -456px;

        padding: 0;
        display: block;
        }



        .singleSearchSubmit{
            background: white;
            opacity: 0;
            filter: alpha(opacity=0);
            -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
            display: block;
            width: 25px;
            height: 25px;
            margin: 0;
            padding: 0;
            border: 0 none;
            position: absolute;
            top: 0;
            right: 0;
            cursor: pointer;
            align-items: flex-start;
            text-align: center;
            color: buttontext;
            box-sizing: border-box;
            -webkit-appearance: push-button;
            -webkit-user-select: none;
            white-space: pre;
            -webkit-rtl-ordering: logical;
            letter-spacing: normal;
            word-spacing: normal;
            text-transform: none;
            text-indent: 0px;
            text-shadow: none;
            -webkit-writing-mode: horizontal-tb;

        }


        .ui-watermark-container input[type="text"] {
            width: 105px;
            margin:0 0 0 10px;
            border: none;
            color: #333;
            padding: 3px 0;
            height: 18px;
            line-height: 18px;
            box-sizing: content-box;
            overflow: hidden;
            outline: none;
            background-color: transparent;
            -webkit-appearance: textfield;
            -webkit-rtl-ordering: logical;
            -webkit-user-select: text;
            cursor: auto;
            letter-spacing: normal;
            word-spacing: normal;
            text-transform: none;
            text-indent: 0px;
            text-shadow: none;
            display: inline-block;
            text-align: start;
            -webkit-writing-mode: horizontal-tb;
            white-space: nowrap;
        }

        .list-houseUnitCodeCondition{
            height: 25px;
            line-height: 25px;
            position: relative;
            padding: 1px 0;
            display: block;
        }

        .inputButton{
            display: inline-block;
            width: 114px;
            background-color: #fff;
            border: 1px solid #BED6F8;
            vertical-align: top;
        }

        .inputButon-button{
            line-height: 27px;
            float: right;
            vertical-align: top;
            font-size: 16px;
            padding: 0 2px;
            position: relative;
            user-select: none;
            -webkit-user-select: none;
            white-space: nowrap;
            unicode-bidi: -webkit-isolate;
            direction: ltr;
            display: block;
        }

        .inputButon-button a{
            cursor: pointer;
            padding: 0 4px;
            display: inline-block;
            text-decoration: none;
            line-height: 27px;
            font-size: 16px;
            padding: 0 2px;
            position: relative;
            user-select: none;
            -webkit-user-select: none;
            white-space: nowrap;
            overflow: visible;
        }

        .inputButon-button a:hover{

        }


        .inputButton input[type="text"]{
            width: 89px;
            margin:0 0 0 0px;
            border: none;
            padding: 0 0px;

            box-sizing: content-box;
            overflow: hidden;
            outline: none;
            background-color: transparent;
            -webkit-appearance: textfield;
            -webkit-rtl-ordering: logical;
            -webkit-user-select: text;
            cursor: auto;
            letter-spacing: normal;
            word-spacing: normal;
            text-transform: none;
            text-indent: 0px;
            text-shadow: none;
            display: inline-block;
            text-align: start;
            -webkit-writing-mode: horizontal-tb;
            white-space: nowrap;
        }

        </h:outputStylesheet>



        <div class="container-fluid">
            <div class="default-main">
                <div class="main-wrapper">
                    <div class="mb-layout-bd column1">
                        <div class="leftbat-bottom-bg">
                            <div class="leftbar-outer">
                                <div class="leftbar">
                                    <div style="min-height: 105px;margin-top: 10px;">

                                        <h:form>

                                            <h:selectOneMenu value="#{houseStepSelect.district}"
                                                             style="width: 151px; background: #e7e7e7;margin: 0 10px 4px 10px;height: 25px;line-height: 25px;padding: 1px 0;">
                                                <s:selectItems value="#{allDistrict.resultList}" var="_district"
                                                               itemValue="#{_district}" label="#{_district.name}"
                                                               noSelectionLabel="#{messages.DistrictSelect}"/>
                                                <f:converter converterId="houseEntityConverter"/>
                                                <a:ajax event="valueChange" execute="@this" render="sectionSelectInputs">
                                                    <a:attachQueue requestDelay="0"/>
                                                </a:ajax>
                                            </h:selectOneMenu>

                                            <a:outputPanel id="sectionSelectInputs" layout="block" style="margin: 0 10px;padding-left: 26px;">

                                                <a:jsFunction name="blurFunction" execute="sectionNameInput" render="projectSelectInputs"/>

                                            <span id="sectionNamePlaceHodle">
                                                <script type="text/javascript">
                                                    new RichFaces.ui.Placeholder("sectionNamePlaceHodle",{"targetId":"#{r:clientId('sectionNameInput')}Input","text":"#{messages.SectionPySelect}"});
                                                </script>
                                            </span>

                                                <div class="colum1-sub-input">
                                                    <r:autocomplete id="sectionNameInput" mode="cachedAjax" minChars="2" value="#{houseStepSelect.sectionName}"
                                                                    inputClass="sectionName-input"
                                                                    autocompleteMethod="#{houseStepSelect.sectionNameAutoComplete}" onselectitem="blurFunction()"
                                                                    autofill="true" selectFirst="true" onblur="blurFunction()">
                                                    </r:autocomplete>
                                                </div>



                                                <a:outputPanel id="projectSelectInputs">

                                                    <a:outputPanel rendered="#{((not empty houseStepSelect.section) or (not empty houseStepSelect.sectionName)) and (not empty houseStepSelect.projects)}">


                                                        <h:selectOneMenu value="#{houseStepSelect.project}" styleClass="colum1-sub-input">
                                                            <s:selectItems value="#{houseStepSelect.projects}"
                                                                           var="_project" itemValue="#{_project}"
                                                                           label="#{_project.name}"
                                                                           noSelectionLabel="#{messages.ProjectSelect}"/>
                                                            <f:converter converterId="houseEntityConverter"/>
                                                            <a:ajax event="valueChange" render="buildSelectInput">
                                                                <a:attachQueue requestDelay="0"/>
                                                            </a:ajax>
                                                        </h:selectOneMenu>


                                                        <a:outputPanel id="buildSelectInput">

                                                            <h:selectOneMenu rendered="#{not empty houseStepSelect.project}" styleClass="colum1-sub-input" value="#{buildHome.id}">
                                                                <s:selectItems value="#{houseStepSelect.project.buildList}"
                                                                               var="_build" itemValue="#{_build.id}"
                                                                               label="#{_build.name}"
                                                                               noSelectionLabel="#{messages.BuildSelect}"/>
                                                                <a:ajax event="valueChange" render="gridMap">
                                                                    <a:attachQueue requestDelay="0"/>
                                                                </a:ajax>
                                                            </h:selectOneMenu>
                                                        </a:outputPanel>

                                                    </a:outputPanel>
                                                </a:outputPanel>


                                            </a:outputPanel>

                                        </h:form>
                                    </div>
                                    <h:form>
                                        <div class="list-all">
                                            <div class="list-title">
                                                #{messages.COBUORB}
                                            </div>

                                            <div class="list-houseUnitCodeCondition">
                                                <h:panelGrid columns="2">
                                                    <h:graphicImage value="/img/icons/map.png" style="margin: 1px 6px 0 8px"/>

                                                    <h:inputText id="MapCodeInput" style="width: 114px;margin: 0" >
                                                        <r:placeholder value="#{messages.Build_MapNO}"/>
                                                    </h:inputText>

                                                    <h:graphicImage value="/img/icons/block.png" style="margin: 0px 6px 0 8px"/>
                                                    <h:inputText id="BlockCodeInput" style="width: 114px" >
                                                        <r:placeholder value="#{runParam.getStringParamValue('HouseBlockCodeLabel')}"/>
                                                    </h:inputText>

                                                    <h:graphicImage value="/img/icons/build.png" style="margin: 0px 6px 0 8px"/>

                                                    <s:div styleClass="inputButton">
                                                        <h:inputText id="BuildCodeInput">
                                                            <r:placeholder value="#{messages.Build_BuildNO}"/>
                                                        </h:inputText>

                                                        <div class="inputButon-button">
                                                            <a:commandButton image="/img/icons/search.png" style="width: 13px; height: 13px;padding: 1px"/>
                                                        </div>
                                                    </s:div>

                                                    <h:graphicImage value="/img/icons/house.png" style="margin: 0px 6px 0 8px"/>
                                                    <s:div styleClass="inputButton">
                                                        <h:inputText id="HouseOrderInput">
                                                            <r:placeholder value="#{messages.House_Order}"/>
                                                        </h:inputText>

                                                        <div class="inputButon-button">
                                                            <a:commandButton image="/img/icons/search.png" style="width: 13px; height: 13px;padding: 1px"/>
                                                        </div>
                                                    </s:div>
                                                </h:panelGrid>
                                            </div>


                                        </div>
                                    </h:form>

                                </div>
                            </div>

                        </div>

                    </div>

                    <div class="mb-layout-bd column3" id="selectPanel">
                        <div class="album-wrapper">
                            <div class="album">

                            </div>
                            <div class="split">

                            </div>
                        </div>

                        <div class="ui-resizable" id="lrcResize" onmousedown="down(event,this)"
                             onmouseup="up(event)" onmousemove="move(event);">
                            <div class="resizable-icon"/>
                        </div>

                    </div>

                    <div class="mb-layout-bd column2" id="contextPanel" onselectstart="return false;">
                        <r:messages globalOnly="false" ajaxRendered="true"/>

                        <div style="width: 100%; height: 100%; overflow-x: auto; overflow-y: auto; margin: 5px 5px 5px 5px;">
                            <a:outputPanel id="gridMap">
                                <a:outputPanel rendered="#{buildHome.idDefined}">




                                    <a:repeat value="#{buildHome.buildGridPages}" var="_buildGridMap">

                                        <br/>
                                        <h:panelGrid columns="1">
                                            <s:div style="text-align: center;">
                                                <h:outputText value="#{_buildGridMap.name}" style="font-size: 1.5em; font-weight: bold"/>
                                            </s:div>

                                            <s:decorate template="/layout/house/BuildGridMapTemplate.xhtml">
                                                <ui:param name="tdSize" value="50"/>
                                                <ui:param name="gridMap" value="#{_buildGridMap}"/>

                                                <s:div rendered="#{not empty _house.house}"
                                                       style="width: 100%; height: 100%; padding: 0px; border: 0px;">

                                                    <h:outputText value="#{_house.house.houseOrder}"
                                                                  style="font-size: 1em; font-weight: bold; color: #000000;"/>

                                                    <br/>
                                                    <a:outputPanel rendered="#{not empty _house.house.houseOwner}">
                                                        <ui:include src="/layout/long-text-display.xhtml">
                                                            <ui:param name="value" value="#{_house.house.houseOwner.personName}"/>
                                                            <ui:param name="size" value="6"/>
                                                            <ui:param name="textStyle" value="font-size: 0.9em;color: #797268;"/>
                                                        </ui:include>
                                                    </a:outputPanel>

                                                    <br/>
                                                    <s:div style="height: 16px;padding: 0px;border: 0px;position: absolute;bottom: 0;left: 0;">
                                                        <h:graphicImage value="/img/icons/#{_house.house.masterStatus}.png"
                                                                        title="#{messages[_house.house.masterStatus.name()]}"/>

                                                        <h:graphicImage
                                                                rendered="#{_house.house.initRegStatus eq 'INIT_REG_CONFIRM'}"
                                                                value="/img/icons/power.png" title="#{messages.INIT_REG_CONFIRM}"/>

                                                        <h:graphicImage
                                                                rendered="#{_house.house.initRegStatus eq 'INIT_REG'}"
                                                                value="/img/icons/initReg.png" title="#{messages.INIT_REG}"/>




                                                    </s:div>


                                                </s:div>
                                                <ui:define name="house-action">

                                                    <a:commandButton style="padding-left: 1px; padding-right: 1px;"
                                                                     image="/img/icons/info-blue.png"
                                                                     rendered="#{not empty _house.house}"
                                                                     title="#{messages.BuildMapAction_edit}"
                                                                     oncomplete="#{r:component('houseInfoPanel')}.show();"
                                                                     immediate="true" execute="@this" render="houseDetails">
                                                        <a:param value="#{_house.house.id}" assignTo="#{houseHome.id}"/>
                                                        <a:attachQueue requestDelay="0"/>
                                                    </a:commandButton>

                                                </ui:define>

                                            </s:decorate>
                                        </h:panelGrid>

                                    </a:repeat>



                                    <br/>
                                    <h:panelGrid columns="1">
                                        <s:div style="text-align: center;">
                                            <h:outputText value="#{messages.OtherHouseGridMap}" style="font-size: 1.5em; font-weight: bold"/>
                                        </s:div>

                                        <s:decorate template="/layout/house/BuildGridMapTemplate.xhtml">
                                            <ui:param name="tdSize" value="50"/>
                                            <ui:param name="gridMap" value="#{buildHome.idleHouseGridMap}"/>

                                            <s:div rendered="#{not empty _house.house}"
                                                   style="width: 100%; height: 100%; padding: 0px; border: 0px;">

                                                <h:outputText value="#{_house.house.houseOrder}"
                                                              style="font-size: 1em; font-weight: bold; color: #000000;"/>

                                                <br/>
                                                <a:outputPanel rendered="#{not empty _house.house.houseOwner}">
                                                    <ui:include src="/layout/long-text-display.xhtml">
                                                        <ui:param name="value" value="#{_house.house.houseOwner.personName}"/>
                                                        <ui:param name="size" value="6"/>
                                                        <ui:param name="textStyle" value="font-size: 0.9em;color: #797268;"/>
                                                    </ui:include>
                                                </a:outputPanel>

                                                <br/>
                                                <s:div style="height: 16px;padding: 0px;border: 0px;position: absolute;bottom: 0;left: 0;">
                                                    <h:graphicImage value="/img/icons/#{_house.house.masterStatus}.png"
                                                                    title="#{messages[_house.house.masterStatus.name()]}"/>

                                                    <h:graphicImage
                                                            rendered="#{_house.house.initRegStatus eq 'INIT_REG_CONFIRM'}"
                                                            value="/img/icons/power.png" title="#{messages.INIT_REG_CONFIRM}"/>

                                                    <h:graphicImage
                                                            rendered="#{_house.house.initRegStatus eq 'INIT_REG'}"
                                                            value="/img/icons/initReg.png" title="#{messages.INIT_REG}"/>




                                                </s:div>


                                            </s:div>
                                            <ui:define name="house-action">

                                                <a:commandButton style="padding-left: 1px; padding-right: 1px;"
                                                                 image="/img/icons/info-blue.png"
                                                                 rendered="#{not empty _house.house}"
                                                                 title="#{messages.BuildMapAction_edit}"
                                                                 oncomplete="#{r:component('houseInfoPanel')}.show();"
                                                                 immediate="true" execute="@this" render="houseDetails">
                                                    <a:param value="#{_house.house.id}" assignTo="#{houseHome.id}"/>
                                                    <a:attachQueue requestDelay="0"/>
                                                </a:commandButton>

                                            </ui:define>

                                        </s:decorate>
                                    </h:panelGrid>

                                </a:outputPanel>
                            </a:outputPanel>
                        </div>

                    </div>

                </div>
            </div>
        </div>

    </ui:define>

</ui:composition>