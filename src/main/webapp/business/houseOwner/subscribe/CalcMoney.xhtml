<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:s="http://jboss.org/schema/seam/taglib"
                xmlns:a="http://richfaces.org/a4j" xmlns:r="http://richfaces.org/rich"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html">

    <a:outputPanel layout="block" styleClass="panel panel-default"
                   rendered="#{not empty calcBusinessMoney.businessMoneyList}">


        <div class="panel-body">
            <a:region >
            <a:repeat var="_moneyItem" value="#{calcBusinessMoney.businessMoneyList}">

                <f:subview>
                    <s:decorate id="moneyCalcInput" styleClass="form-group" template="/layout/edit-big.xhtml">
                        <ui:define name="label">
                            #{_moneyItem.typeName}
                        </ui:define>
                        <ui:param name="for" value="shouldMoneyInput"/>

                        <div class="input-group">
                            <span class="input-group-addon">#{messages.shouldMoney}</span>
                            <h:inputText id="shouldMoneyInput" value="#{_moneyItem.shouldMoney}" required="true"
                                         class="form-control" label="#{_moneyItem.typeName} #{messages.shouldMoney}"
                                         p:placeholder="#{messages.shouldMoney}">
                                <f:convertNumber currencySymbol="" groupingUsed="false" locale="#{calendarBean.locale}"
                                                 type="currency"/>
                                <f:validateDoubleRange minimum="0"/>
                                <a:ajax event="change" render="moneyCalcInput,calcMoneyTotal" execute="@region"/>
                            </h:inputText>
                            <span class="input-group-addon">#{messages.factMoney}</span>
                            <h:inputText id="factMoneyInput" value="#{_moneyItem.factMoney}" required="true"
                                         class="form-control" label="#{_moneyItem.typeName} #{messages.factMoney}"
                                         p:placeholder="#{messages.factMoney}">
                                <f:convertNumber currencySymbol="" groupingUsed="false" locale="#{calendarBean.locale}"
                                                 type="currency"/>
                                <f:validateDoubleRange minimum="0"/>
                                <a:ajax event="change" render="moneyCalcInput,calcMoneyTotal" execute="@region"/>
                            </h:inputText>
                        </div>
                    </s:decorate>

                </f:subview>


            </a:repeat>
            </a:region>




        </div>
        <div class="panel-footer">
            #{messages.recordTotal}
            <a:outputPanel id="calcMoneyTotal" layout="block" class="right">

                <div style="display: table-cell;">
                    #{messages.shouldMoney}
                </div>
                <div style="display: table-cell;">
                    <h:outputText value="#{calcBusinessMoney.total.shouldMoney}">
                        <f:convertNumber groupingUsed="true" locale="#{calendarBean.locale}"
                                         type="currency"/>
                    </h:outputText>

                </div>
                <div style="display: table-cell;">
                    #{messages.factMoney}
                </div>
                <div style="display: table-cell;">
                    <h:outputText value="#{calcBusinessMoney.total.factMoney}">
                        <f:convertNumber groupingUsed="true" locale="#{calendarBean.locale}"
                                         type="currency"/>
                    </h:outputText>
                </div>

            </a:outputPanel>
        </div>
    </a:outputPanel>

</ui:composition>